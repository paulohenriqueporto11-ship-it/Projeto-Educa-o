<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulados - Estuda.IA</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4F46E5">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

    <nav>
        <div class="logo">âœ¨ Estuda.IA</div>
        <a href="index.html" class="btn-outline" style="border:none; font-weight:600;">â† Voltar</a>
    </nav>

    <div class="container" style="display: flex; align-items: center; justify-content: center; min-height: 80vh;">
        
        <div id="startScreen" class="quiz-container">
            <span class="tool-icon" style="margin: 0 auto 20px auto;">ğŸ§ </span>
            <h1 style="margin-bottom: 10px;">Desafio DiÃ¡rio</h1>
            <p style="color:var(--text-muted); margin-bottom: 30px;">Teste os seus conhecimentos com 5 questÃµes aleatÃ³rias estilo ENEM.</p>
            <button class="btn" style="padding: 15px 40px; font-size: 1.2rem;" onclick="startQuiz()">ComeÃ§ar Agora</button>
        </div>

        <div id="quizScreen" class="quiz-container" style="display: none;">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                <span class="badge-subject" id="subjectTag">MatÃ©ria</span>
                <span style="font-weight:600; color:var(--text-muted);">QuestÃ£o <span id="qIndex">1</span>/5</span>
            </div>
            
            <div class="question-text" id="questionText">Carregando...</div>
            
            <div class="options-grid" id="optionsContainer">
                </div>
        </div>

        <div id="resultScreen" class="quiz-container" style="display: none;">
            <div style="font-size: 4rem;">ğŸ†</div>
            <h2 style="margin-bottom: 10px;">Resultado Final</h2>
            <div class="quiz-score" id="finalScore">0/5</div>
            <p id="feedbackText" style="margin-bottom: 30px; color:var(--text-muted);">Bom trabalho!</p>
            
            <div style="display:flex; gap:10px; justify-content:center;">
                <button class="btn" onclick="location.reload()">Tentar Novamente</button>
                <a href="index.html" class="btn-outline" style="padding:12px 24px; border-radius:10px; display:inline-flex; align-items:center;">Voltar ao Menu</a>
            </div>
        </div>

    </div>

    <script>
        // --- BANCO DE QUESTÃ•ES (Mini Database) ---
        const allQuestions = [
            {
                subject: "Linguagens",
                text: "No contexto da redaÃ§Ã£o do ENEM, o que caracteriza a 'fuga ao tema'?",
                options: ["Erros gramaticais excessivos", "NÃ£o abordar o assunto proposto pela frase temÃ¡tica", "Escrever menos de 7 linhas", "NÃ£o apresentar proposta de intervenÃ§Ã£o"],
                correct: 1
            },
            {
                subject: "HistÃ³ria",
                text: "Qual movimento artÃ­stico brasileiro de 1922 rompeu com o tradicionalismo e buscou uma identidade nacional?",
                options: ["Barroco Mineiro", "Romantismo", "Semana de Arte Moderna", "Tropicalismo"],
                correct: 2
            },
            {
                subject: "GramÃ¡tica",
                text: "Assinale a alternativa onde o uso da crase Ã© OBRIGATÃ“RIO:",
                options: ["Fui a pÃ© para casa.", "Ele obedeceu Ã  lei.", "Estou disposto a ajudar.", "Comprei o carro a prazo."],
                correct: 1
            },
            {
                subject: "Filosofia",
                text: "Quem Ã© o autor da frase 'Penso, logo existo'?",
                options: ["PlatÃ£o", "Nietzsche", "Descartes", "SÃ³crates"],
                correct: 2
            },
            {
                subject: "Sociologia",
                text: "Segundo Zygmunt Bauman, vivemos em uma 'Modernidade LÃ­quida'. O que isso significa?",
                options: ["As relaÃ§Ãµes sÃ£o fluidas e frÃ¡geis", "A escassez de Ã¡gua no mundo", "A solidez das instituiÃ§Ãµes governamentais", "O aumento do nÃ­vel dos oceanos"],
                correct: 0
            },
            {
                subject: "RedaÃ§Ã£o",
                text: "Qual conectivo abaixo expressa ideia de CONCLUSÃƒO?",
                options: ["Todavia", "Portanto", "Embora", "Visto que"],
                correct: 1
            },
            {
                subject: "MatemÃ¡tica",
                text: "Qual Ã© a probabilidade de tirar um nÃºmero par em um dado comum de 6 faces?",
                options: ["30%", "50%", "25%", "60%"],
                correct: 1 // 3 em 6 = 50%
            }
        ];

        // --- LÃ“GICA DO QUIZ ---
        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;

        function startQuiz() {
            // Embaralha e pega 5 questÃµes
            currentQuestions = allQuestions.sort(() => 0.5 - Math.random()).slice(0, 5);
            currentIndex = 0;
            score = 0;
            
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('quizScreen').style.display = 'block';
            loadQuestion();
        }

        function loadQuestion() {
            const q = currentQuestions[currentIndex];
            document.getElementById('subjectTag').innerText = q.subject;
            document.getElementById('qIndex').innerText = currentIndex + 1;
            document.getElementById('questionText').innerText = q.text;
            
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';

            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => selectAnswer(index, q.correct, btn);
                container.appendChild(btn);
            });
        }

        function selectAnswer(selected, correct, btnElement) {
            // Bloqueia todos os botÃµes
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(b => b.disabled = true);

            if (selected === correct) {
                btnElement.classList.add('correct');
                score++;
            } else {
                btnElement.classList.add('wrong');
                // Mostra qual era a certa
                buttons[correct].classList.add('correct');
            }

            // Espera 1.5s e vai pra prÃ³xima
            setTimeout(() => {
                currentIndex++;
                if (currentIndex < currentQuestions.length) {
                    loadQuestion();
                } else {
                    finishQuiz();
                }
            }, 1500);
        }

        function finishQuiz() {
            document.getElementById('quizScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            document.getElementById('finalScore').innerText = `${score}/5`;
            
            const msg = document.getElementById('feedbackText');
            if(score === 5) msg.innerText = "Perfeito! VocÃª Ã© um gÃªnio! ğŸ¤“";
            else if(score >= 3) msg.innerText = "Muito bom! Continue estudando. ğŸ“š";
            else msg.innerText = "Precisa revisar mais... ğŸ˜…";
        }
    </script>
</body>
</html>
